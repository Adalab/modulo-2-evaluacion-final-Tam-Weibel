const v=document.querySelector(".js-input"),p=document.querySelector(".js-search-btn"),g=document.querySelector(".js-reset-btn"),h=document.querySelector(".js-favorites-btn"),o=document.querySelector(".js-results-list"),r=document.querySelector(".js-favorites-list");let u=[],c=[],a=JSON.parse(localStorage.getItem("favorites"))||[];const _="https://api.jikan.moe/v4/anime?q=",L="https://cdn.myanimelist.net/img/sp/icon/apple-touch-icon-256.png",S="https://placehold.jp/24/5e63a1/ffffff/133x200.png?text=No%20Image%20Available";function f(s){r.innerHTML="";for(const e of s){const t=`<article class="favorites__card">                       
                        <span>${e.title}</span>
                        <img src="${e.img}" alt="${e.title}" class="favorites__img">
                        <span class="favorites__icon js-favorites-icon"><i class="fa-solid fa-trash-can"></i></span>
                    </article>`;r.insertAdjacentHTML("beforeend",t)}}function I(s,e,t){t.currentTarget.classList.add("results__card--fav");const i={title:s,img:e};a||(a=[]);let n=a.find(l=>l.title===s);n?m(n.title):(a.push(i),f(a),localStorage.setItem("favorites",JSON.stringify(a)))}function y(s){for(const e of s){const t=document.createElement("article"),i=document.createElement("img"),n=document.createElement("p"),l=document.createTextNode(e.title);i.src=e.img,i.alt=e.title,n.appendChild(l),t.appendChild(n),t.appendChild(i),t.setAttribute("class","results__card"),t.setAttribute("title",e.title),i.setAttribute("class","results__img"),o.appendChild(t),a.find(d=>d.title===e.title)&&t.classList.add("results__card--fav"),t.addEventListener("click",d=>I(e.title,e.img,d))}}function E(s){c=[],o.innerHTML="";for(const e of s){const t={title:e.titles[1].title,img:e.images.webp.image_url};t.img===L&&(t.img=S),c.push(t)}y(c)}function T(s){s.preventDefault();const e=v.value.toLowerCase();fetch(_+e).then(t=>t.json()).then(t=>{u=t.data,E(u)}).catch(t=>console.error("Fetch error:",t))}function j(s){s.preventDefault(),o.innerHTML="",r.innerHTML="",localStorage.removeItem("favorites"),v.value="",c=[],a=[]}function q(s){s.preventDefault(),r.innerHTML="",localStorage.removeItem("favorites");for(const e of a){const t=o.querySelector(`[title="${e.title}"]`);t&&t.classList.remove("results__card--fav")}a=[]}function m(s){let e=a.findIndex(i=>i.title===s);e!==-1&&(a.splice(e,1),localStorage.removeItem("favorites"),localStorage.setItem("favorites",JSON.stringify(a)),f(a));const t=o.querySelector(`[title="${s}"]`);t&&t.classList.remove("results__card--fav")}function A(s){const e=s.closest(".favorites__card");if(e){const t=e.querySelector(".favorites__img").alt;m(t)}}function C(){f(a),p.addEventListener("click",T),g.addEventListener("click",j),h.addEventListener("click",q),r.addEventListener("click",function(s){const e=s.target.closest(".js-favorites-icon");e&&A(e)})}C();
//# sourceMappingURL=main.js.map
