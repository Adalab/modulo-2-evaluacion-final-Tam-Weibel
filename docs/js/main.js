const v=document.querySelector(".js-input"),p=document.querySelector(".js-search-btn"),g=document.querySelector(".js-reset-btn"),h=document.querySelector(".js-favorites-btn"),c=document.querySelector(".js-results-list"),o=document.querySelector(".js-favorites-list");let u=[],l=[],a=JSON.parse(localStorage.getItem("favorites"))||[];const _="https://api.jikan.moe/v4/anime?q=",L="https://cdn.myanimelist.net/img/sp/icon/apple-touch-icon-256.png",S="https://placehold.jp/24/5e63a1/ffffff/133x200.png?text=No%20Image%20Available";function m(s){o.innerHTML="";for(const t of s){const e=`<article class="favorites__card">                       
                        <span>${t.title}</span>
                        <img src="${t.img}" alt="${t.title}" class="favorites__img">
                        <span class="favorites__icon js-favorites-icon"><i class="fa-solid fa-trash-can"></i></span>
                    </article>`;o.insertAdjacentHTML("beforeend",e)}}function y(s,t,e){e.currentTarget.classList.add("results__card--fav");const i={title:s,img:t};a||(a=[]),a.find(n=>n.title===s)?console.log("Anime is already in favorites"):(a.push(i),m(a),localStorage.setItem("favorites",JSON.stringify(a)))}function I(s){for(const t of s){const e=document.createElement("article"),i=document.createElement("img"),r=document.createElement("p"),n=document.createTextNode(t.title);i.src=t.img,i.alt=t.title,r.appendChild(n),e.appendChild(r),e.appendChild(i),e.setAttribute("class","results__card"),e.setAttribute("title",t.title),i.setAttribute("class","results__img"),c.appendChild(e),a.find(d=>d.title===t.title)&&e.classList.add("results__card--fav"),e.addEventListener("click",d=>y(t.title,t.img,d))}}function E(s){l=[],c.innerHTML="";for(const t of s){const e={title:t.titles[1].title,img:t.images.webp.image_url};e.img===L&&(e.img=S),l.push(e)}I(l)}function T(s){s.preventDefault();const t=v.value.toLowerCase();fetch(_+t).then(e=>e.json()).then(e=>{u=e.data,E(u)}).catch(e=>console.error("Fetch error:",e))}function j(s){s.preventDefault(),c.innerHTML="",o.innerHTML="",localStorage.removeItem("favorites"),v.value="",l=[],a=[]}function q(s){s.preventDefault(),o.innerHTML="",localStorage.removeItem("favorites");for(const t of a){const e=c.querySelector(`[title="${t.title}"]`);e&&e.classList.remove("results__card--fav")}a=[]}function A(s,t){t.preventDefault();const e=s.closest(".favorites__card"),i=e.querySelector(".favorites__img").alt;let r=a.findIndex(f=>f.title===i);r!==-1&&(a.splice(r,1),localStorage.removeItem("favorites"),localStorage.setItem("favorites",JSON.stringify(a)));const n=c.querySelector(`[title="${i}"]`);n&&n.classList.remove("results__card--fav"),e.remove()}function D(){m(a),p.addEventListener("click",T),g.addEventListener("click",j),h.addEventListener("click",q),o.addEventListener("click",function(s){const t=s.target.closest(".js-favorites-icon");t&&A(t,s)})}D();
//# sourceMappingURL=main.js.map
