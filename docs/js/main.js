const u=document.querySelector(".js-input"),g=document.querySelector(".js-search-btn"),_=document.querySelector(".js-reset-btn"),h=document.querySelector(".js-favorites-btn"),a=document.querySelector(".js-results-list"),r=document.querySelector(".js-favorites-list");let f=[],l=[],i=JSON.parse(localStorage.getItem("favorites"))||[];const L="https://api.jikan.moe/v4/anime?q=",S="https://cdn.myanimelist.net/img/sp/icon/apple-touch-icon-256.png",I="https://placehold.jp/24/5e63a1/ffffff/133x200.png?text=No%20Image%20Available";function v(s){return i.find(e=>e.title===s)}function d(s){r.innerHTML="";for(const e of s){const t=`<article class="favorites__card">                       
                        <span id="${e.id}">${e.title}</span>
                        <img src="${e.img}" alt="${e.title}" class="favorites__img">
                        <span class="favorites__icon js-favorites-icon"><i class="fa-solid fa-trash-can"></i></span>
                    </article>`;r.insertAdjacentHTML("beforeend",t)}}function y(s,e,t,n){n.currentTarget.classList.add("results__card--fav");const o={id:s,title:e,img:t};let c=v(e);c?m(c.title):(i.push(o),d(i),localStorage.setItem("favorites",JSON.stringify(i)))}function E(s){for(const e of s){const t=document.createElement("article"),n=document.createElement("img"),o=document.createElement("p"),c=document.createTextNode(e.title);n.src=e.img,n.alt=e.title,o.appendChild(c),t.appendChild(o),t.appendChild(n),t.setAttribute("class","results__card"),t.setAttribute("id",e.id),t.setAttribute("title",e.title),n.setAttribute("class","results__img"),a.appendChild(t),v(e.title)&&t.classList.add("results__card--fav"),t.addEventListener("click",p=>y(e.id,e.title,e.img,p))}}function T(s){l=[],a.innerHTML="",l=s.map(e=>{const t={id:e.mal_id,title:e.titles[1].title,img:e.images.webp.image_url};return t.img===S&&(t.img=I),t}),E(l)}function j(s){s.preventDefault();const e=u.value.toLowerCase();fetch(L+e).then(t=>t.json()).then(t=>{f=t.data,T(f)}).catch(t=>console.error("Fetch error:",t))}function A(s){s.preventDefault(),a.innerHTML="",r.innerHTML="",localStorage.removeItem("favorites"),u.value="",l=[],i=[]}function b(s){s.preventDefault(),r.innerHTML="",localStorage.removeItem("favorites");for(const e of i){const t=a.querySelector(`[title="${e.title}"]`);t&&t.classList.remove("results__card--fav")}i=[]}function m(s){let e=i.findIndex(n=>n.title===s);e!==-1&&(i.splice(e,1),localStorage.removeItem("favorites"),localStorage.setItem("favorites",JSON.stringify(i)),d(i));const t=a.querySelector(`[title="${s}"]`);t&&t.classList.remove("results__card--fav")}function q(s){const e=s.closest(".favorites__card");if(e){const t=e.querySelector(".favorites__img").alt;m(t)}}function C(){d(i),g.addEventListener("click",j),_.addEventListener("click",A),h.addEventListener("click",b),r.addEventListener("click",function(s){const e=s.target.closest(".js-favorites-icon");e&&q(e)})}C();
//# sourceMappingURL=main.js.map
