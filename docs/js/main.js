const f=document.querySelector(".js-input"),g=document.querySelector(".js-search-btn"),h=document.querySelector(".js-reset-btn"),_=document.querySelector(".js-favorites-btn"),o=document.querySelector(".js-results-list"),r=document.querySelector(".js-favorites-list");let d=[],c=[],a=JSON.parse(localStorage.getItem("favorites"))||[];const L="https://api.jikan.moe/v4/anime?q=",S="https://cdn.myanimelist.net/img/sp/icon/apple-touch-icon-256.png",I="https://placehold.jp/24/5e63a1/ffffff/133x200.png?text=No%20Image%20Available";function u(s){return a.find(e=>e.title===s)}function l(s){r.innerHTML="";for(const e of s){const t=`<article class="favorites__card">                       
                        <span>${e.title}</span>
                        <img src="${e.img}" alt="${e.title}" class="favorites__img">
                        <span class="favorites__icon js-favorites-icon"><i class="fa-solid fa-trash-can"></i></span>
                    </article>`;r.insertAdjacentHTML("beforeend",t)}}function y(s,e,t){t.currentTarget.classList.add("results__card--fav");const i={title:s,img:e};a||(a=[]);let n=u(s);n?v(n.title):(a.push(i),l(a),localStorage.setItem("favorites",JSON.stringify(a)))}function E(s){for(const e of s){const t=document.createElement("article"),i=document.createElement("img"),n=document.createElement("p"),m=document.createTextNode(e.title);i.src=e.img,i.alt=e.title,n.appendChild(m),t.appendChild(n),t.appendChild(i),t.setAttribute("class","results__card"),t.setAttribute("title",e.title),i.setAttribute("class","results__img"),o.appendChild(t),u(e.title)&&t.classList.add("results__card--fav"),t.addEventListener("click",p=>y(e.title,e.img,p))}}function T(s){c=[],o.innerHTML="";for(const e of s){const t={title:e.titles[1].title,img:e.images.webp.image_url};t.img===S&&(t.img=I),c.push(t)}E(c)}function j(s){s.preventDefault();const e=f.value.toLowerCase();fetch(L+e).then(t=>t.json()).then(t=>{d=t.data,T(d)}).catch(t=>console.error("Fetch error:",t))}function q(s){s.preventDefault(),o.innerHTML="",r.innerHTML="",localStorage.removeItem("favorites"),f.value="",c=[],a=[]}function A(s){s.preventDefault(),r.innerHTML="",localStorage.removeItem("favorites");for(const e of a){const t=o.querySelector(`[title="${e.title}"]`);t&&t.classList.remove("results__card--fav")}a=[]}function v(s){let e=a.findIndex(i=>i.title===s);e!==-1&&(a.splice(e,1),localStorage.removeItem("favorites"),localStorage.setItem("favorites",JSON.stringify(a)),l(a));const t=o.querySelector(`[title="${s}"]`);t&&t.classList.remove("results__card--fav")}function C(s){const e=s.closest(".favorites__card");if(e){const t=e.querySelector(".favorites__img").alt;v(t)}}function b(){l(a),g.addEventListener("click",j),h.addEventListener("click",q),_.addEventListener("click",A),r.addEventListener("click",function(s){const e=s.target.closest(".js-favorites-icon");e&&C(e)})}b();
//# sourceMappingURL=main.js.map
